<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>React RxJS</title>
  </head>
  <body>
    <h1>React RxJS</h1>

    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://unpkg.com/@reactivex/rxjs@5.0.0/dist/global/Rx.js" charset="utf-8"></script>


    <script type="text/babel">

    class App extends React.Component {
      state = {
        count: 0,
      }

      buttonClick = () => {
        const button = this._button
        Rx.Observable.fromEvent(button, 'click')
          .scan(count => count + 1, 0)
          .subscribe(count => {
            console.log('count', count)
            console.log('this.state.count++', this.state.count++)
            this.setState({count: this.state.count++});
          });
      }


      render() {
        return (
          <div>
            <h1>Welcome!</h1>
            <button
              ref={ref => this._button = ref}
              onClick={this.buttonClick}
            >
              Observable Button
            </button>
            <br />
            Count: <div id="count">{this.state.count}</div>
          </div>
        )
      }
    }




      ReactDOM.render(<App />, document.getElementById('root'));
    </script>
  </body>
</html>
